<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>PickAI Test Page</title>
  <style>
    body { font-family: Arial; padding: 18px; }
    #ocrResult{ margin-top:8px; color:#080; font-family:monospace; }
    #answer{ margin-top:12px; color:#009; font-family:monospace; }
  </style>
</head>
<body>
  <h2>PickAI 테스트 페이지</h2>
  <p>테스트용: 버튼 누르면 메시지 전송</p>
  <button id="send">OCR 테스트 보내기 (2+3)</button>
  <div id="ocrResult"></div>
  <div id="answer"></div>

  <script>
    document.getElementById("send").onclick = () => {
      const cleaned = "2+3";
      document.getElementById("ocrResult").innerText = "인식결과: " + cleaned;
      window.postMessage({ source: "PICK_AI", type: "OCR_RESULT", text: cleaned }, "*");
      console.log("[PICK AI] OCR_RESULT sent");
    };

    // ChatGPT 결과 받기
    window.addEventListener("message", (e) => {
      if (e.data && e.data.type === "CHATGPT_ANSWER") {
        document.getElementById("answer").innerText = "정답: " + e.data.answer;
        console.log("[PICK AI] got answer:", e.data.answer);
      }
    });
  </script>
</body>
</html>
